<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OAuth on Hello,I am Greycode!</title><link>https://greycode.top/tags/oauth/</link><description>Recent content in OAuth on Hello,I am Greycode!</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 19 May 2020 20:25:06 +0000</lastBuildDate><atom:link href="https://greycode.top/tags/oauth/index.xml" rel="self" type="application/rss+xml"/><item><title>基于SpringCloud搭建Spring-security-oauth认证服务器</title><link>https://greycode.top/posts/spring-security-oauth-server-demo/</link><pubDate>Tue, 19 May 2020 20:25:06 +0000</pubDate><guid>https://greycode.top/posts/spring-security-oauth-server-demo/</guid><description>准备阶段 这里搭建一个用OAuth2.0密码模式认证的服务器，token存入redis，client存入Mysql；
所以事先要准备好：
Redis Mysql 并且Mysql执行Spring-security-oauth初始化Sql这个SQL，初始化Spring-security-oauth所需要的表。然后执行
-- 插入client_id和client_secret都为sunline的客户端 insert into oauth_client_details (client_id, client_secret, authorized_grant_types , autoapprove) values (&amp;#34;sunline&amp;#34;,&amp;#34; {bcrypt}$2a$10$G1CFd535SiyOtvi6ckbZWexQy.hW5x/I/fLBPiW/E4UmctCfKYbgG&amp;#34;,&amp;#34;password&amp;#34;,&amp;#34;true&amp;#34;); client_secret为new BCryptPasswordEncoder().encode(&amp;quot;sunline&amp;quot;)方法加密后，然后在加上{bcrypt}
开始搭建 导入pom依赖 &amp;lt;!--security-oauth--&amp;gt; &amp;lt;dependency&amp;gt; &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;spring-cloud-starter-oauth2&amp;lt;/artifactId&amp;gt; &amp;lt;/dependency&amp;gt; &amp;lt;!--redis--&amp;gt; &amp;lt;dependency&amp;gt; &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;spring-boot-starter-data-redis&amp;lt;/artifactId&amp;gt; &amp;lt;/dependency&amp;gt; &amp;lt;!--mysql--&amp;gt; &amp;lt;dependency&amp;gt; &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt; &amp;lt;version&amp;gt;8.0.17&amp;lt;/version&amp;gt; &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt; &amp;lt;/dependency&amp;gt; 配置application.properties #datasource spring.datasource.url=jdbc:mysql://localhost:3307/grey_code?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;autoReconnect=true&amp;amp;serverTimezone=Asia/Shanghai spring.datasource.username=zmh spring.datasource.password=zmh #redis spring.redis.host=127.0.0.1 spring.redis.port=6379 server.port=9991 server.servlet.context-path=/oauthServer 创建用户详情服务类 创建权限控制类 创建认证授权类 获取令牌 访问:/oauth/token就可以获取到令牌</description></item></channel></rss>